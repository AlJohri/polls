<p>

<a class="btn btn-lg btn-success" ng-click="refreshHP()">HP <span class="glyphicon glyphicon-download"></span></a>

<span
  class="glyphicon"
  ng-class="{
    'glyphicon-refresh glyphicon-refresh-animate': status.$getRecord('hp')['$value'] === 'loading',
    'glyphicon-ok text-success': status.$getRecord('hp')['$value'] === 'complete',
    'glyphicon-remove text-danger': status.$getRecord('hp') == undefined
  }">
</span>

</p>

<!-- <pre>{{hp | json}}</pre> -->

<h2>HP</h2>

<table ng-show="hp" class="table table-striped">
  <thead>
    <tr>
      <th>Poll</th>
      <th>Name</th>
      <th>Pollster</th>
      <th>Date</th>
      <th>Last Updated</th>
      <th>Candidates</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="question in hp">
      <td><a href="{{'http://elections.huffingtonpost.com/pollster/polls/-' + question.poll_id}}">{{question.id}}</a></td>
      <td>{{question.name}}</td>
      <td>{{question.pollster}}</td>
      <td>{{(question.start_date | date:'M/dd') + " - " + (question.end_date | date:'M/dd')}}</td>
      <td>{{question.last_updated | date:'M/dd'}}</td>
      <td><pre>{{ question.responses | pluck2:'choice':'value' | join:'\n' }}</pre></td>
    </tr>
  </tbody>
</table>